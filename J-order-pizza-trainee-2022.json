{
    "name": "pizza-trainee-2022",
    "description": "order a pizza",
    "blueprint_spec": {
        "lanes": [
            {
                "id": ["Usuario","Restaurante","Delivery"],
                "name": ["Usuário","Restaurante","Delivery"],
                "rule": [
                    "fn",
                    [
                        "&",
                        "args"
                    ],
                    true
                ]
            }
        ],

        "nodes":
        
        [{
            "id": "Inicio",
            "name": "Início do Processo",
            "next": "Cadastro/Login",
            "type": "start",
            "lane_id": "Usuario",
            "parameters": {
                "input_schema": {}
            }
        },
        {
            "id": "Cadastro/Login",
            "name": "Cadastro/Login",
            "next": "Simular_Pedido",
            "lane_id": "Usuario",
            "type": "SystemTask",
            "category": "http",
            "parameters": {
                "input": {},
                "request": {
                    "url": "www.minhapizzaria.com.br/cadastro-login",
                    "verb": "GET",
                    "headers": {}
                }
            },
            "result_schema": {}
        },
        {
            "id": "Simular-Pedido",
            "name": "Iniciar uma simulação de Pedido",
            "next": "Escolher_Produtos",
            "lane_id": "Usuario",
            "type": "UserTask",
            "parameters": {
                "action": "SIMULAR_PEDIDO",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Escolher-Produtos",
            "name": "Escolha dos Produtos que integrarão o pedido",
            "next": "Confirmarcao_Pedido",
            "lane_id": "Usuario",
            "type": "UserTask",
            "parameters": {
                "action": "ESCOLHER_PRODUTOS",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Confirmacao_Pedido",
            "name": "Confirmar a escolha dos produtos selecionados",
            "next": {
                "OK": "Add_Desconto",
                "NOK": "Escolher_Produtos",
                "default": "Opção Inválida"
            },
            "type": "flow",
            "lane_id": "Usuario",
            "parameters": {
                "input": {
                    "key": "Pedido Válido"
                }
            }
        },
        {
            "id": "Add-Desconto",
            "name": "Adicionar Desconto",
            "next": "Forma_Pagamento",
            "lane_id": "Usuario",
            "type": "UserTask",
            "parameters": {
                "action": "ADD_DESCONTO",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Forma_Pagamento",
            "name": "Selecionar a Forma de Pagamento",
            "next": {
                "Online": "Aceitar-Pedido",
                "Entrega": "Aceitar-Pedido"
            },
            "type": "flow",
            "lane_id": "Usuario",
            "parameters": {
                "input": {
                    "key": "Aguardando confirmação do Restaurante"
                }
            }
        },
        {
            "id": "Aceitar-Pedido",
            "name": "Confirmar Preparo do Pedido",
            "next": "Pedido-Recebido",
            "lane_id": "Restaurante",
            "type": "SystemTask",
            "category": "setToBag",
            "parameters": {
                "input": {}
            }
        },
        {
            "id": "Pedido-Recebido",
            "type": "SystemTask",
            "category": "startProcess",
            "name": "Restaurante inicia o preparo do Pedido",
            "parameters": {
                "workflow_name": "Pedido_Recebido",
                "input": {},
                "actor_data": {"$ref": "actor_data"
                }
            },
            "next": "Preparar-Pedido",
            "lane_id": "Restaurante"
        },
        {
            "id": "Preparar-Pedido",
            "name": "Fazer a pizza e separar produtos do pedido do cliente",
            "next": "Organizar-Pedido",
            "lane_id": "Restaurante",
            "type": "UserTask",
            "parameters": {
                "action": "Preparar_Pedido",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Organizar-Pedido",
            "name": "Organizar os produtos de acordo com o pedido do cliente",
            "next": "Checar-Pedido",
            "lane_id": "Restaurante",
            "type": "UserTask",
            "parameters": {
                "action": "ORGANIZAR_PEDIDO",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Checar-Pedido",
            "name": "Checar se o pedido do cliente está correto",
            "next": {
                "OK": "Pedido-Pronto",
                "NOK": "Organizar-Pedido",
                "default": "Opção Inválida"
            },
            "type": "flow",
            "lane_id": "Restaurante",
            "parameters": {
                "input": {
                    "key": "Se o pedido estiver pronto, será enviado para entrega"
                }
            }
        },
        {
            "id": "Pedido-Pronto",
            "name": "Confirmar o envio do Pedido",
            "next": "Enviar-Pedido",
            "lane_id": "Restaurante",
            "type": "SystemTask",
            "category": "setToBag",
            "parameters": {
                "input": {}
            }
        },
        {
            "id": "Enviar-Pedido",
            "type": "SystemTask",
            "category": "startProcess",
            "name": "Enviar pedido para endereço que consta no cadastro",
            "parameters": {
                "workflow_name": "Enviar_Pedido",
                "input": {},
                "actor_data": {"$ref": "actor_data"
                }
            },
            "next": "Chegar-Destino",
            "lane_id": "Delivery"
        },
        {
            "id": "Chegar-Destino",
            "name": "Chegar ao destino indicado pelo cliente no cadastro",
            "next": "Contatar-Cliente",
            "lane_id": "Delivery",
            "type": "UserTask",
            "parameters": {
                "action": "CHEGAR_DESTINO",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Contatar-Cliente",
            "name": "Entrar em contato com o cliente",
            "next": {
                "OK": "Checar-Comanda",
                "NOK": "Cliente-Ausente",
                "default": "Opção Inválida"
            },
            "type": "flow",
            "lane_id": "Delivery",
            "parameters": {
                "input": {
                    "key": "Serão feitas até 5 tentativas de contato com o cliente"
                }
            }
        },
        {
            "id": "Sem-Resposta",
            "name": "5 tentativas de contato com o cliente sem resposta",
            "next": "Finalizar-Sem-Entrega",
            "lane_id": "Delivery",
            "type": "UserTask",
            "parameters": {
                "action": "FINALIZAR_CONTATO",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Finalizar-Sem-Entrega",
            "name": "Pedido finalizado sem entrega",
            "type": "Finish",
            "lane_id": "Delivery",
            "next": null
        },
        {
            "id": "Checar-Comanda",
            "name": "Fazer a conferência do pedido juntamente com o cliente",
            "next": {
                "OK": "Pagamento",
                "NOK": "Ligar-Restaurante",
                "default": "Opção Inválida"
            },
            "type": "flow",
            "lane_id": "Delivery",
            "parameters": {
                "input": {
                    "key": "Checar pedido para avaliar eficiência do sistema"
                }
            }
        },
        {
            "id": "Ligar-Restaurante",
            "name": "Ligar para o Restaurante",
            "next": "Negociar-Cliente",
            "lane_id": "Delivery",
            "type": "UserTask",
            "parameters": {
                "action": "LIGAR_RESTAURANTE",
                "input": {},
                "activity_manager": "commit or notify",
                "activity_schema": {
                    "$ref": "activity_schema"
                }
            },
            "result_schema": {}
        },
        {
            "id": "Negociar-Cliente",
            "name": "Negociar solução com o cliente",
            "type": "Finish",
            "lane_id": "Delivery",
            "next": null
        },
        {
            "id": "Pagamento",
            "name": "Conferir método de pagamento solicitado pelo cliente",
            "next": {
                "Online": "Avaliacao",
                "Entrega": "Pagamento-Entrega",
                "default": "Opção Inválida"
            },
            "type": "flow",
            "lane_id": "Delivery",
            "parameters": {
                "input": {
                    "key": "Revisar Forma_Pagamento"
                }
            }
        },
        {
            "id": "Pagamento-Entrega",
            "name": "Cliente solicitou o pagamento no ato da Entrega do Pedido",
            "next": {
                "OK": "Avaliacao",
                "NOK": "Ligar-Restaurante",
                "default": "Opção Inválida"
            },
            "type": "flow",
            "lane_id": "Delivery",
            "parameters": {
                "input": {
                    "key": "Efetuar pagamento na entrega do pedido"
                }
            }
        },
        {
            "id": "Avaliacao",
            "name": "Solicitar avaliação da experiência ao cliente",
            "next": {
                "Sim": "Pedido-Entregue",
                "Não": "Pedido-Entregue",
                "default": "Opção Inválida"
            },
            "type": "flow",
            "lane_id": "Delivery",
            "parameters": {
                "input": {
                    "key": "Solicitar Avaliação do Cliente"
                }
            }
        },
        {
            "id": "Pedido-Entregue",
            "name": "Pedido Entregue com Sucesso",
            "type": "Finish",
            "lane_id": "Delivery",
            "next": null
        }]
    }
}